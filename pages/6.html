<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Event Horizon</title>
    
    <!-- 依赖库 -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/framer-motion/dist/framer-motion.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css" rel="stylesheet">
    
    <!-- 字体：NASA 风格 -->
    <link href="https://fonts.googleapis.com/css2?family=Antonio:wght@100;400;700&family=Rajdhani:wght@300;500;700&display=swap" rel="stylesheet">

    <style>
        :root {
            --space-black: #050505;
            --accretion-orange: #ffaa55;
            --starlight: #ffffff;
            --gravity-glass: rgba(20, 20, 25, 0.6);
        }

        body {
            background-color: var(--space-black);
            color: var(--starlight);
            font-family: 'Rajdhani', sans-serif;
            overflow: hidden;
            margin: 0;
        }

        /* --- 动态星场 Canvas 容器 --- */
        #starfield {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            z-index: 0;
            pointer-events: none;
        }

        /* --- 黑洞吸积盘模拟 (纯 CSS) --- */
        .black-hole-container {
            position: fixed;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            width: 800px; height: 800px;
            z-index: 1;
            pointer-events: none;
            opacity: 0.8;
            filter: blur(40px);
        }
        .accretion-disk {
            position: absolute;
            top: 50%; left: 50%;
            width: 100%; height: 100%;
            transform: translate(-50%, -50%) rotateX(70deg);
            border-radius: 50%;
            box-shadow: 
                inset 0 0 100px var(--accretion-orange),
                0 0 50px var(--accretion-orange);
            border: 20px solid rgba(255, 170, 85, 0.3);
            animation: spin-disk 20s linear infinite;
        }
        .event-horizon {
            position: absolute;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            width: 300px; height: 300px;
            background: #000;
            border-radius: 50%;
            box-shadow: 0 0 50px #ffaa55, inset 0 0 40px #000;
            z-index: 2;
        }
        @keyframes spin-disk {
            0% { transform: translate(-50%, -50%) rotateX(75deg) rotate(0deg); }
            100% { transform: translate(-50%, -50%) rotateX(75deg) rotate(360deg); }
        }

        /* --- 引力玻璃卡片 --- */
        .gravity-card {
            background: var(--gravity-glass);
            backdrop-filter: blur(12px) brightness(1.1);
            -webkit-backdrop-filter: blur(12px) brightness(1.1);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 0 0 1px rgba(0,0,0,0.5), 0 20px 50px rgba(0,0,0,0.8);
            position: relative;
            overflow: hidden;
        }
        /* 卡片顶部的扫描光 */
        .gravity-card::after {
            content: '';
            position: absolute;
            top: 0; left: -100%; width: 50%; height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.05), transparent);
            transform: skewX(-20deg);
            animation: shimmer 6s infinite;
        }
        @keyframes shimmer {
            0% { left: -100%; }
            20% { left: 200%; }
            100% { left: 200%; }
        }

        /* --- 字体 --- */
        .font-header { font-family: 'Antonio', sans-serif; }

        /* --- 输入框 --- */
        .input-void {
            background: rgba(0,0,0,0.4);
            border-bottom: 2px solid rgba(255,255,255,0.2);
            transition: all 0.4s cubic-bezier(0.2, 0.8, 0.2, 1);
        }
        .input-void:focus-within {
            background: rgba(255,170,85,0.05);
            border-bottom-color: var(--accretion-orange);
            box-shadow: 0 10px 20px -10px rgba(255,170,85,0.3);
        }
        .input-void label {
            transition: all 0.3s ease;
        }
        .input-void:focus-within label, .input-void.has-val label {
            transform: translateY(-24px) scale(0.8);
            color: var(--accretion-orange);
            opacity: 1;
        }

        /* --- 按钮 --- */
        .btn-star {
            background: white;
            color: black;
            position: relative;
            z-index: 10;
            overflow: hidden;
            transition: transform 0.2s;
        }
        .btn-star:hover {
            transform: scale(1.02);
            box-shadow: 0 0 30px rgba(255, 255, 255, 0.4);
        }
        .btn-star:active { transform: scale(0.98); }
        
        .btn-outline {
            border: 1px solid rgba(255,255,255,0.3);
            color: rgba(255,255,255,0.7);
        }
        .btn-outline:hover {
            border-color: white;
            color: white;
            background: rgba(255,255,255,0.05);
        }

    </style>
</head>
<body class="flex items-center justify-center min-h-screen">

    <!-- 星场 Canvas -->
    <canvas id="starfield"></canvas>

    <!-- 黑洞视觉层 -->
    <div class="black-hole-container">
        <div class="accretion-disk"></div>
        <div class="event-horizon"></div>
    </div>

    <!-- UI 挂载点 -->
    <div id="root" class="relative z-50 w-full max-w-[440px] px-6"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;
        const { motion, AnimatePresence } = window.Motion;

        // --- 星场逻辑 ---
        const Starfield = () => {
            useEffect(() => {
                const canvas = document.getElementById('starfield');
                const ctx = canvas.getContext('2d');
                let width = window.innerWidth;
                let height = window.innerHeight;
                canvas.width = width;
                canvas.height = height;

                const stars = [];
                const numStars = 200;
                
                // 初始化星星
                for(let i=0; i<numStars; i++) {
                    stars.push({
                        x: Math.random() * width - width/2,
                        y: Math.random() * height - height/2,
                        z: Math.random() * width
                    });
                }

                const animate = () => {
                    ctx.fillStyle = "#050505";
                    ctx.fillRect(0, 0, width, height);
                    
                    const cx = width/2;
                    const cy = height/2;

                    stars.forEach(star => {
                        // 移动 Z 轴
                        star.z -= 2; // 速度
                        if (star.z <= 0) {
                            star.z = width;
                            star.x = Math.random() * width - width/2;
                            star.y = Math.random() * height - height/2;
                        }

                        // 投影计算
                        const x = (star.x / star.z) * 100 + cx;
                        const y = (star.y / star.z) * 100 + cy;
                        const size = (1 - star.z / width) * 3;
                        const alpha = (1 - star.z / width);

                        if(x > 0 && x < width && y > 0 && y < height) {
                            ctx.beginPath();
                            ctx.fillStyle = `rgba(255, 255, 255, ${alpha})`;
                            ctx.arc(x, y, size, 0, Math.PI * 2);
                            ctx.fill();
                        }
                    });
                    requestAnimationFrame(animate);
                };
                
                animate();
                
                const handleResize = () => {
                    width = window.innerWidth;
                    height = window.innerHeight;
                    canvas.width = width;
                    canvas.height = height;
                };
                window.addEventListener('resize', handleResize);
                return () => window.removeEventListener('resize', handleResize);
            }, []);
            return null;
        };

        // --- 组件: 全局通知 ---
        const OrbitToast = ({ msg, type }) => (
            <motion.div
                initial={{ opacity: 0, y: 30, scale: 0.8 }}
                animate={{ opacity: 1, y: 0, scale: 1 }}
                exit={{ opacity: 0, y: -20, scale: 0.8 }}
                className="fixed top-8 left-1/2 -translate-x-1/2 flex items-center gap-3 px-6 py-3 bg-black/80 border border-white/20 backdrop-blur-xl rounded-none"
            >
                <div className={`w-1.5 h-1.5 rounded-full shadow-[0_0_8px_currentColor] ${type==='error'?'bg-red-500 text-red-500':'bg-[#ffaa55] text-[#ffaa55]'}`}></div>
                <span className="text-sm font-header tracking-widest uppercase">{msg}</span>
            </motion.div>
        );

        // --- 组件: 虚空输入框 ---
        const VoidInput = ({ label, type="text", value, onChange, rightElem }) => {
            const hasVal = value && value.length > 0;
            return (
                <div className={`input-void relative h-16 px-4 flex items-end pb-2 mb-4 group ${hasVal?'has-val':''}`}>
                    <label className="absolute left-4 top-5 text-gray-500 text-sm font-medium tracking-wide uppercase pointer-events-none">
                        {label}
                    </label>
                    <input 
                        type={type} 
                        value={value} 
                        onChange={onChange}
                        className="w-full bg-transparent border-none outline-none text-white text-lg font-header tracking-wide z-10"
                    />
                    {rightElem && <div className="absolute right-2 bottom-3 z-20">{rightElem}</div>}
                    
                    {/* 装饰角标 */}
                    <div className="absolute top-0 right-0 w-2 h-2 border-t border-r border-white/20 opacity-0 group-focus-within:opacity-100 transition-opacity"></div>
                    <div className="absolute bottom-0 left-0 w-2 h-2 border-b border-l border-white/20 opacity-0 group-focus-within:opacity-100 transition-opacity"></div>
                </div>
            );
        };

        // --- 组件: 倒计时按钮 ---
        const TimerBtn = ({ onClick, count }) => (
            <button 
                type="button" 
                onClick={onClick} 
                disabled={count>0}
                className={`text-[10px] font-bold uppercase tracking-[0.2em] border px-2 py-1 transition-all
                    ${count>0 
                        ? 'border-gray-700 text-gray-600 cursor-not-allowed' 
                        : 'border-[#ffaa55]/50 text-[#ffaa55] hover:bg-[#ffaa55] hover:text-black'}
                `}
            >
                {count > 0 ? `SYNC ${count}s` : 'TRANSMIT'}
            </button>
        );

        // --- 页面: 登录 ---
        const Login = ({ nav, toast }) => {
            const [form, setForm] = useState({u:'', p:''});
            const [loading, setLoading] = useState(false);

            const submit = () => {
                if(!form.u) return toast('Identity Unknown', 'error');
                setLoading(true);
                setTimeout(() => {
                    setLoading(false);
                    toast('Gravity Well Stabilized. Welcome.');
                }, 1500);
            };

            return (
                <motion.div initial={{opacity:0, scale:0.9}} animate={{opacity:1, scale:1}} exit={{opacity:0, scale:1.1}}>
                    <div className="mb-10 text-center">
                        <h1 className="font-header text-6xl text-white mb-2 drop-shadow-[0_0_15px_rgba(255,255,255,0.3)]">HORIZON</h1>
                        <p className="text-xs text-gray-400 tracking-[0.4em] uppercase">Secure Communication Uplink</p>
                    </div>

                    <VoidInput label="Commander ID" value={form.u} onChange={e=>setForm({...form, u:e.target.value})} />
                    <VoidInput label="Access Key" type="password" value={form.p} onChange={e=>setForm({...form, p:e.target.value})} />

                    <div className="flex justify-end mb-8">
                        <button onClick={()=>nav('reset')} className="text-[10px] uppercase tracking-widest text-gray-500 hover:text-white transition-colors">Lost Credentials?</button>
                    </div>

                    <div className="space-y-4">
                        <button onClick={submit} disabled={loading} className="btn-star w-full h-12 text-sm font-bold uppercase tracking-[0.2em]">
                            {loading ? 'Initializing...' : 'Initiate Sequence'}
                        </button>
                        <button onClick={()=>nav('reg')} className="btn-outline w-full h-12 text-sm font-bold uppercase tracking-[0.2em]">
                            Establish New Uplink
                        </button>
                    </div>
                </motion.div>
            );
        };

        // --- 页面: 注册 ---
        const Register = ({ nav, toast }) => {
            const [form, setForm] = useState({u:'', e:'', c:'', p:''});
            const [count, setCount] = useState(0);

            useEffect(()=>{if(count>0)setTimeout(()=>setCount(c=>c-1),1000)},[count]);

            return (
                <motion.div initial={{opacity:0, x:50}} animate={{opacity:1, x:0}} exit={{opacity:0, x:-50}}>
                    <div className="mb-8 flex items-center justify-between border-b border-white/10 pb-4">
                        <h2 className="font-header text-3xl">NEW PROTOCOL</h2>
                        <span className="text-[10px] text-[#ffaa55] border border-[#ffaa55] px-1">VER 2.0</span>
                    </div>

                    <VoidInput label="Designation" value={form.u} onChange={e=>setForm({...form, u:e.target.value})} />
                    <VoidInput 
                        label="Frequency (Email)" 
                        value={form.e} onChange={e=>setForm({...form, e:e.target.value})}
                        rightElem={<TimerBtn count={count} onClick={()=>{setCount(60);toast('Signal Beamed to Frequency')}} />}
                    />
                    <div className="flex gap-4">
                        <div className="w-1/3">
                            <VoidInput label="Code" value={form.c} onChange={e=>setForm({...form, c:e.target.value})} />
                        </div>
                        <div className="w-2/3">
                            <VoidInput label="Secret" type="password" value={form.p} onChange={e=>setForm({...form, p:e.target.value})} />
                        </div>
                    </div>

                    <div className="mt-8 grid grid-cols-2 gap-4">
                        <button onClick={()=>nav('login')} className="btn-outline h-12 text-xs font-bold uppercase tracking-widest">Abort</button>
                        <button onClick={()=>{toast('Uplink Established');nav('login')}} className="btn-star h-12 text-xs font-bold uppercase tracking-widest">Engage</button>
                    </div>
                </motion.div>
            );
        };

        // --- 页面: 重置 ---
        const Reset = ({ nav, toast }) => {
            const [form, setForm] = useState({e:'', c:'', np:''});
            const [count, setCount] = useState(0);
            
            useEffect(()=>{if(count>0)setTimeout(()=>setCount(c=>c-1),1000)},[count]);

            return (
                <motion.div initial={{opacity:0, scale:0.95}} animate={{opacity:1, scale:1}} exit={{opacity:0, scale:1.05}}>
                    <div className="mb-8 border-l-4 border-[#ffaa55] pl-6">
                        <h2 className="font-header text-4xl">RECOVERY</h2>
                        <p className="text-xs text-gray-500 mt-1 tracking-widest">RESTORE LOST ACCESS</p>
                    </div>

                    <VoidInput 
                        label="Target Frequency" 
                        value={form.e} onChange={e=>setForm({...form, e:e.target.value})} 
                        rightElem={<TimerBtn count={count} onClick={()=>{setCount(60);toast('Recovery Signal Sent')}} />}
                    />
                    <VoidInput label="Auth Code" value={form.c} onChange={e=>setForm({...form, c:e.target.value})} />
                    <VoidInput label="New Sequence" type="password" value={form.np} onChange={e=>setForm({...form, np:e.target.value})} />

                    <div className="mt-8">
                        <button onClick={()=>{toast('Sequence Updated');nav('login')}} className="btn-star w-full h-12 text-sm font-bold uppercase tracking-[0.2em] mb-4">
                            Update
                        </button>
                        <button onClick={()=>nav('login')} className="text-center w-full text-[10px] uppercase tracking-widest text-gray-500 hover:text-white">
                            Return to Base
                        </button>
                    </div>
                </motion.div>
            );
        };

        // --- 主程序 ---
        const App = () => {
            const [page, setPage] = useState('login');
            const [msg, setMsg] = useState(null);

            const toast = (m, t='success') => {
                setMsg({m, t});
                setTimeout(()=>setMsg(null), 3000);
            };

            return (
                <>
                    <Starfield />
                    <AnimatePresence>
                        {msg && <OrbitToast msg={msg.m} type={msg.t} />}
                    </AnimatePresence>
                    
                    <div className="gravity-card w-full max-w-[460px] p-8 md:p-12 relative z-10">
                        {/* 装饰线 */}
                        <div className="absolute top-0 left-0 w-full h-[1px] bg-gradient-to-r from-transparent via-white/20 to-transparent"></div>
                        <div className="absolute bottom-0 left-0 w-full h-[1px] bg-gradient-to-r from-transparent via-white/10 to-transparent"></div>
                        
                        <AnimatePresence mode="wait">
                            {page === 'login' && <Login key="login" nav={setPage} toast={toast} />}
                            {page === 'reg' && <Register key="reg" nav={setPage} toast={toast} />}
                            {page === 'reset' && <Reset key="reset" nav={setPage} toast={toast} />}
                        </AnimatePresence>
                    </div>

                    <div className="fixed bottom-6 text-[10px] text-gray-600 tracking-[0.5em] uppercase mix-blend-difference z-10">
                        Interstellar Comm Sys v9.0
                    </div>
                </>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>