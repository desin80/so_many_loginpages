<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Industrial Tech</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/framer-motion/dist/framer-motion.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css" rel="stylesheet">
    <!-- 引入等宽字体和点阵字体 -->
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&family=Share+Tech+Mono&display=swap" rel="stylesheet">

    <style>
        :root {
            --bg: #0a0a0a;
            --surface: #111111;
            --border: #333333;
            --text-main: #e5e5e5;
            --text-dim: #666666;
            --accent: #ff003c; /* 工业红 */
        }

        body {
            background-color: var(--bg);
            color: var(--text-main);
            font-family: 'JetBrains Mono', monospace; /* 全局等宽字体 */
            overflow: hidden;
            /* 点阵背景 */
            background-image: radial-gradient(var(--border) 1px, transparent 1px);
            background-size: 20px 20px;
        }

        /* 点阵标题字体模拟 */
        .font-dot {
            font-family: 'Share Tech Mono', monospace;
            letter-spacing: -1px;
        }

        /* 工业边框：带刻度 */
        .tech-border {
            border: 1px solid var(--border);
            position: relative;
            background: var(--surface);
        }
        .tech-border::before {
            content: '';
            position: absolute;
            top: -1px; left: -1px;
            width: 10px; height: 10px;
            border-top: 2px solid var(--accent);
            border-left: 2px solid var(--accent);
        }
        .tech-border::after {
            content: '';
            position: absolute;
            bottom: -1px; right: -1px;
            width: 10px; height: 10px;
            border-bottom: 2px solid var(--accent);
            border-right: 2px solid var(--accent);
        }

        /* 扫描线动画 */
        .scan-line {
            width: 100%;
            height: 2px;
            background: rgba(255, 0, 60, 0.3);
            position: absolute;
            top: 0;
            left: 0;
            animation: scan 3s linear infinite;
            opacity: 0.5;
            pointer-events: none;
        }
        @keyframes scan {
            0% { top: 0%; opacity: 0; }
            10% { opacity: 1; }
            90% { opacity: 1; }
            100% { top: 100%; opacity: 0; }
        }

        /* 输入框聚焦时的辉光 */
        .input-tech:focus-within {
            border-color: var(--accent);
            box-shadow: 0 0 0 1px var(--accent);
        }
    </style>
</head>
<body class="h-screen flex items-center justify-center relative">

    <div id="root" class="w-full max-w-[420px] px-4 relative z-10"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;
        const { motion, AnimatePresence } = window.Motion;

        // --- 工业风格 Toast ---
        const TechToast = ({ msg, type }) => (
            <motion.div
                initial={{ y: -50, opacity: 0 }}
                animate={{ y: 0, opacity: 1 }}
                exit={{ y: -50, opacity: 0 }}
                className="fixed top-6 left-0 right-0 mx-auto w-fit max-w-sm z-50 flex items-stretch shadow-2xl"
            >
                <div className={`w-2 ${type === 'error' ? 'bg-red-600' : 'bg-white'}`}></div>
                <div className="bg-[#1a1a1a] border border-[#333] px-6 py-3 flex items-center gap-3">
                    <span className={`text-xs font-bold uppercase tracking-widest ${type==='error'?'text-red-500':'text-white'}`}>
                        [{type === 'error' ? 'ERR' : 'OK'}]
                    </span>
                    <span className="text-sm font-mono text-gray-300">{msg}</span>
                </div>
            </motion.div>
        );

        // --- 工业输入框 ---
        const TechInput = ({ label, type = "text", value, onChange, placeholder, rightElem }) => (
            <div className="mb-6 group">
                <div className="flex justify-between items-end mb-2">
                    <label className="text-[10px] uppercase tracking-[2px] text-gray-500 group-focus-within:text-white transition-colors">
                        {label}
                    </label>
                    {/* 装饰性坐标 */}
                    <span className="text-[8px] text-[#333] font-mono">X:{Math.floor(Math.random()*99)} Y:{Math.floor(Math.random()*99)}</span>
                </div>
                <div className="relative input-tech bg-black border border-[#333] transition-all duration-200">
                    <input
                        type={type}
                        value={value}
                        onChange={onChange}
                        placeholder={placeholder}
                        className="w-full bg-transparent text-white p-3 text-sm outline-none font-mono placeholder-gray-700"
                    />
                    {rightElem && (
                        <div className="absolute right-0 top-0 h-full flex items-center border-l border-[#333]">
                            {rightElem}
                        </div>
                    )}
                    {/* 角标装饰 */}
                    <div className="absolute bottom-0 right-0 w-2 h-2 border-r border-b border-gray-600 opacity-0 group-focus-within:opacity-100 transition-opacity"></div>
                </div>
            </div>
        );

        // --- 机械按钮 ---
        const TechButton = ({ children, onClick, loading, variant = 'primary' }) => {
            const isPrimary = variant === 'primary';
            return (
                <button
                    onClick={onClick}
                    disabled={loading}
                    className={`
                        w-full h-12 relative overflow-hidden group
                        border transition-all duration-200
                        ${isPrimary 
                            ? 'bg-white text-black border-white hover:bg-[#ccc]' 
                            : 'bg-transparent text-gray-400 border-[#333] hover:text-white hover:border-white'}
                        ${loading ? 'opacity-50 cursor-not-allowed' : ''}
                    `}
                >
                    {/* 扫描动画背景 (仅 Primary) */}
                    {isPrimary && !loading && <div className="absolute inset-0 bg-red-500/0 group-hover:bg-red-500/10 transition-colors"></div>}
                    
                    <div className="relative z-10 flex items-center justify-center gap-3 font-bold text-sm uppercase tracking-widest">
                        {loading && <div className="w-3 h-3 border-2 border-black border-t-transparent rounded-full animate-spin"></div>}
                        {!loading && isPrimary && <span className="w-1.5 h-1.5 bg-red-600 rounded-full"></span>}
                        {children}
                    </div>

                    {/* 装饰性斜线纹理 */}
                    {loading && (
                        <div className="absolute inset-0 opacity-10" 
                            style={{backgroundImage: 'repeating-linear-gradient(45deg, #000 0, #000 2px, transparent 2px, transparent 6px)'}}
                        ></div>
                    )}
                </button>
            );
        };

        // --- 纯文本验证码按钮 ---
        const CodeBtn = ({ onClick, count }) => (
            <button
                type="button"
                onClick={onClick}
                disabled={count > 0}
                className={`
                    h-full px-4 text-xs font-mono uppercase transition-colors
                    ${count > 0 
                        ? 'text-gray-600 bg-[#0f0f0f] cursor-not-allowed' 
                        : 'text-red-500 hover:bg-red-500 hover:text-white bg-black'}
                `}
            >
                {count > 0 ? `WAIT ${count.toString().padStart(2,'0')}s` : 'SEND_CODE'}
            </button>
        );

        // --- 页面: Login ---
        const Login = ({ nav, toast }) => {
            const [form, setForm] = useState({ u: '', p: '' });
            
            const submit = () => {
                if(!form.u) return toast('MISSING_IDENTITY', 'error');
                toast('AUTHENTICATING...'); 
                // fake login
            };

            return (
                <motion.div initial={{opacity:0, scale:0.95}} animate={{opacity:1, scale:1}} exit={{opacity:0, scale:1.05}} className="space-y-8">
                    <div className="border-b border-dashed border-[#333] pb-6 mb-8">
                        <div className="flex justify-between items-center mb-2">
                            <div className="w-3 h-3 bg-red-600 animate-pulse"></div>
                            <span className="text-[10px] text-gray-600">SYS_READY</span>
                        </div>
                        <h1 className="text-4xl text-white font-dot uppercase">Login<span className="text-red-600">.</span></h1>
                        <p className="text-xs text-gray-500 mt-2 font-mono">ENTER YOUR CREDENTIALS TO ACCESS NODES.</p>
                    </div>

                    <div className="space-y-2">
                        <TechInput label="USER_ID" placeholder="USERNAME" value={form.u} onChange={e=>setForm({...form, u:e.target.value})} />
                        <TechInput label="ACCESS_KEY" type="password" placeholder="PASSWORD" value={form.p} onChange={e=>setForm({...form, p:e.target.value})} />
                    </div>

                    <div className="flex justify-between items-center text-xs text-gray-500 font-mono">
                        <div className="flex gap-2">
                            <span className="w-3 h-3 border border-gray-600 inline-block"></span> REMEMBER_ME
                        </div>
                        <button onClick={()=>nav('reset')} className="hover:text-white hover:underline decoration-red-600">RESET_KEY?</button>
                    </div>

                    <div className="pt-4 space-y-3">
                        <TechButton onClick={submit}>CONNECT</TechButton>
                        <TechButton variant="secondary" onClick={()=>nav('reg')}>INIT_REGISTRATION</TechButton>
                    </div>
                </motion.div>
            );
        };

        // --- 页面: Register ---
        const Register = ({ nav, toast }) => {
            const [form, setForm] = useState({ u:'', e:'', c:'', p:'', cp:'' });
            const [count, setCount] = useState(0);

            useEffect(() => { if(count>0) setTimeout(()=>setCount(c=>c-1),1000) }, [count]);

            return (
                <motion.div initial={{opacity:0, x:20}} animate={{opacity:1, x:0}} exit={{opacity:0, x:-20}} className="space-y-6">
                    <div className="flex justify-between items-center border-b border-[#333] pb-4">
                        <h2 className="text-2xl font-dot text-white">NEW_USER</h2>
                        <span className="text-[10px] bg-[#222] px-2 py-1 text-gray-400">V1.0</span>
                    </div>

                    <div className="grid gap-1">
                        <TechInput label="IDENTITY" placeholder="USERNAME" value={form.u} onChange={e=>setForm({...form, u:e.target.value})} />
                        <TechInput 
                            label="COMM_CHANNEL" placeholder="EMAIL_ADDRESS" 
                            value={form.e} onChange={e=>setForm({...form, e:e.target.value})}
                            rightElem={<CodeBtn onClick={()=>{setCount(60);toast('PACKET_SENT')}} count={count} />}
                        />
                        <TechInput label="VERIFICATION" placeholder="CODE_XXXX" value={form.c} onChange={e=>setForm({...form, c:e.target.value})} />
                        <div className="grid grid-cols-2 gap-4">
                            <TechInput label="SECRET" type="password" placeholder="PASSWORD" value={form.p} onChange={e=>setForm({...form, p:e.target.value})} />
                            <TechInput label="CONFIRM" type="password" placeholder="REPEAT" value={form.cp} onChange={e=>setForm({...form, cp:e.target.value})} />
                        </div>
                    </div>

                    <div className="flex gap-4 pt-2">
                        <div className="w-1/3">
                            <TechButton variant="secondary" onClick={()=>nav('login')}>&lt; BACK</TechButton>
                        </div>
                        <div className="w-2/3">
                            <TechButton onClick={()=>{toast('USER_CREATED');nav('login')}}>REGISTER</TechButton>
                        </div>
                    </div>
                </motion.div>
            );
        };

        // --- 页面: Reset ---
        const Reset = ({ nav, toast }) => {
            const [form, setForm] = useState({ u:'', e:'', c:'', np:'' });
            const [count, setCount] = useState(0);
            
            useEffect(() => { if(count>0) setTimeout(()=>setCount(c=>c-1),1000) }, [count]);

            return (
                <motion.div initial={{opacity:0, x:20}} animate={{opacity:1, x:0}} exit={{opacity:0, x:-20}} className="space-y-6">
                    <div className="border-l-2 border-red-600 pl-4 py-1 mb-8">
                        <h2 className="text-xl font-dot text-white">RESET_PROTOCOL</h2>
                        <p className="text-[10px] text-gray-500 font-mono mt-1">RECOVER LOST CREDENTIALS</p>
                    </div>

                    <TechInput label="TARGET_ID" placeholder="USERNAME" value={form.u} onChange={e=>setForm({...form, u:e.target.value})} />
                    <TechInput 
                            label="LINKED_EMAIL" placeholder="EMAIL" 
                            value={form.e} onChange={e=>setForm({...form, e:e.target.value})}
                            rightElem={<CodeBtn onClick={()=>{setCount(60);toast('CODE_DISPATCHED')}} count={count} />}
                    />
                    <TechInput label="AUTH_CODE" placeholder="XXXX" value={form.c} onChange={e=>setForm({...form, c:e.target.value})} />
                    <TechInput label="NEW_SECRET" type="password" placeholder="NEW_PASSWORD" value={form.np} onChange={e=>setForm({...form, np:e.target.value})} />

                    <div className="pt-4 space-y-3">
                        <TechButton onClick={()=>{toast('OVERWRITE_SUCCESS');nav('login')}}>EXECUTE_RESET</TechButton>
                        <TechButton variant="secondary" onClick={()=>nav('login')}>ABORT</TechButton>
                    </div>
                </motion.div>
            );
        };

        // --- App ---
        const App = () => {
            const [page, setPage] = useState('login');
            const [msg, setMsg] = useState(null);

            const toast = (m, t='success') => {
                setMsg({m, t});
                setTimeout(()=>setMsg(null), 3000);
            };

            return (
                <>
                    <AnimatePresence>
                        {msg && <TechToast msg={msg.m} type={msg.t} />}
                    </AnimatePresence>

                    {/* 外框：设备感 */}
                    <div className="tech-border w-full p-8 min-h-[550px] flex flex-col justify-center relative bg-[#111]">
                        {/* 扫描线装饰 */}
                        <div className="scan-line"></div>
                        
                        {/* 背景装饰文字 */}
                        <div className="absolute top-4 right-4 text-[8px] text-[#333] font-mono flex flex-col items-end gap-1">
                            <span>SYS.OS.V.2.4</span>
                            <span>MEM: 64TB OK</span>
                            <span>NET: CONNECTED</span>
                        </div>

                        {/* 页面内容 */}
                        <AnimatePresence mode="wait">
                            {page === 'login' && <Login key="login" nav={setPage} toast={toast} />}
                            {page === 'reg' && <Register key="reg" nav={setPage} toast={toast} />}
                            {page === 'reset' && <Reset key="reset" nav={setPage} toast={toast} />}
                        </AnimatePresence>

                        {/* 底部装饰 */}
                        <div className="absolute bottom-2 left-0 w-full flex justify-center gap-1 opacity-20">
                            {[...Array(20)].map((_,i) => (
                                <div key={i} className="w-[2px] h-[4px] bg-red-500"></div>
                            ))}
                        </div>
                    </div>
                </>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>